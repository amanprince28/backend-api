generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["postgresqlExtensions"]
}

datasource db {
  provider   = "postgresql"
  url        = env("DATABASE_URL")
  extensions = [pgcrypto, uuid_ossp(map: "uuid-ossp", schema: "public")]
}

model customer {
  id               String     @id(map: "customer_pk") @default(uuid()) @db.Uuid
  email            String?    @db.VarChar(255)
  gender           String?    @db.VarChar(255)
  ic               String?    @db.VarChar(255)
  name             String?    @db.VarChar(255)
  passport         String?    @db.VarChar(255)
  race             String?    @db.VarChar(255)
  deleted_at       DateTime?
  bank_details     Json?
  created_by       String?    @db.Uuid
  customer_address Json?
  employment       Json?
  relations        Json?
  supervisor       String?    @db.Uuid
  car_plate        String?    @db.VarChar(255)
  marital_status   String?    @db.VarChar(255)
  mobile_no        String?    @db.VarChar(255)
  no_of_child      Int?
  tel_code         String?    @db.VarChar(255)
  tel_no           String?    @db.VarChar(255)
  status           String?    @db.VarChar(255)
  remarks          Json?
  document         document[]
  loan             loan[]
}

model country {
  id     String  @id(map: "country_pk") @default(uuid()) @db.Uuid
  name   String  @db.VarChar(255)
  states state[]
}

model state {
  id         String  @id(map: "state_pk") @default(uuid()) @db.Uuid
  name       String  @db.VarChar(255)
  country_id String  @db.Uuid
  cities     city[]
  country    country @relation(fields: [country_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "state_country_fk")
}

model city {
  id       String @id(map: "city_pk") @default(uuid()) @db.Uuid
  name     String @db.VarChar(255)
  state_id String @db.Uuid
  state    state  @relation(fields: [state_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "city_state_fk")
}

model user {
  id         String   @id @default(uuid()) @db.Uuid
  email      String   @unique @db.VarChar(255)
  password   String?  @db.VarChar(255)
  created_at DateTime @default(now()) @db.Timestamp(6)
  role       Role?    @default(AGENT)
  supervisor String?  @db.Uuid
  name       String?  @db.VarChar(255)
  status    Boolean? @default(true)
}

model document {
  id          String    @id @default(uuid()) @db.Uuid
  name        String    @db.VarChar(255)
  path        String    @db.VarChar(255)
  size        String    @db.VarChar(255)
  description        String    @db.VarChar(255)
  customer_id String?   @db.Uuid
  customer    customer? @relation(fields: [customer_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "document_customer-id_fkey")
}

model loan {
  id               String    @id(map: "loan_pk") @default(uuid()) @db.Uuid
  customer_id      String?   @db.Uuid
  
  application_fee  String?   @db.VarChar
  date_period      String?   @db.VarChar
  deposit_amount   String?   @db.VarChar
  interest         String?   @db.VarChar
  loan_remark      String?   @db.VarChar
  payment_up_front String?   @db.VarChar
  principal_amount String?   @db.VarChar
  repayment_date   String?   @db.VarChar
  unit_of_date     String?   @db.VarChar
  amount_given     String?   @db.VarChar
  interest_amount  String?   @db.VarChar
  payment_per_term String?   @db.VarChar

  remark           String?   @db.VarChar
  created_by       String?   @db.Uuid
  supervisor       String?   @db.Uuid
  customer         customer? @relation(fields: [customer_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "loan_customer_fk")
}

enum Role {
  ADMIN
  LEAD
  AGENT
}
